# PSD上传功能测试清单

## 测试前准备

- [ ] 确保已安装所有依赖：`npm install`
- [ ] 确保数据库迁移已执行
- [ ] 准备测试用的PSD文件（建议准备不同大小和复杂度的文件）
- [ ] 确保Supabase存储桶配置正确

## 功能测试

### 1. PSD文件上传

#### 1.1 文件选择
- [ ] 点击"选择图片"按钮可以选择PSD文件
- [ ] 文件选择器显示PSD格式选项
- [ ] 选择PSD文件后正常加载

#### 1.2 拖拽上传
- [ ] 可以拖拽PSD文件到上传区域
- [ ] 拖拽时显示正确的视觉反馈
- [ ] 拖拽后文件正常加载

#### 1.3 文件验证
- [ ] 上传非PSD文件时显示错误提示
- [ ] 超过100MB的PSD文件显示大小限制提示
- [ ] 未选择分类时提示用户先选择分类

### 2. PSD处理

#### 2.1 缩略图提取
- [ ] PSD文件上传后显示"AI分析中..."状态
- [ ] 成功提取PSD缩略图
- [ ] 缩略图正确显示在预览区域
- [ ] 缩略图质量清晰可见

#### 2.2 AI分析
- [ ] AI成功分析PSD缩略图
- [ ] 生成合理的标签
- [ ] 生成准确的中文提示词
- [ ] 生成准确的英文提示词

#### 2.3 文件存储
- [ ] 原始PSD文件上传到`material/originals/`
- [ ] 缩略图PNG上传到`material/`
- [ ] 两个文件都可以通过URL访问
- [ ] 数据库正确保存original_file_url和file_format

### 3. 素材展示

#### 3.1 素材卡片
- [ ] PSD素材左上角显示紫色"PSD"标识
- [ ] 缩略图正确显示
- [ ] 素材标题和标签正确显示
- [ ] 鼠标悬停时显示操作按钮

#### 3.2 下载功能
- [ ] 普通下载按钮下载PNG缩略图
- [ ] PSD按钮（紫色）正确显示
- [ ] 点击PSD按钮下载原始PSD文件
- [ ] 下载的PSD文件可以在Photoshop中正常打开
- [ ] 下载的文件名正确

### 4. 边界情况测试

#### 4.1 文件大小
- [ ] 小PSD文件（<1MB）正常处理
- [ ] 中等PSD文件（10-50MB）正常处理
- [ ] 大PSD文件（50-100MB）正常处理
- [ ] 超大PSD文件（>100MB）正确拒绝

#### 4.2 PSD文件类型
- [ ] RGB模式PSD文件正常处理
- [ ] CMYK模式PSD文件处理（可能需要特殊处理）
- [ ] 多图层PSD文件正常处理
- [ ] 带效果的PSD文件正常处理
- [ ] 扁平化PSD文件正常处理

#### 4.3 错误处理
- [ ] 损坏的PSD文件显示错误提示
- [ ] 网络错误时显示适当提示
- [ ] 存储失败时回滚操作
- [ ] 数据库保存失败时清理已上传文件

### 5. 性能测试

- [ ] 小文件（<5MB）处理时间 < 10秒
- [ ] 中等文件（5-20MB）处理时间 < 30秒
- [ ] 大文件（20-50MB）处理时间 < 60秒
- [ ] 多个用户同时上传不影响系统稳定性

### 6. 兼容性测试

#### 6.1 浏览器兼容性
- [ ] Chrome浏览器正常工作
- [ ] Firefox浏览器正常工作
- [ ] Safari浏览器正常工作
- [ ] Edge浏览器正常工作

#### 6.2 设备兼容性
- [ ] 桌面端正常工作
- [ ] 平板设备正常工作
- [ ] 移动设备正常工作（如果支持）

### 7. 向后兼容性

- [ ] 现有的PNG/JPG素材仍然正常显示
- [ ] 现有的上传流程不受影响
- [ ] 现有的下载功能正常工作
- [ ] 数据库迁移不影响现有数据

### 8. UI/UX测试

- [ ] 上传进度有适当的视觉反馈
- [ ] 错误消息清晰易懂
- [ ] PSD标识醒目易识别
- [ ] 下载按钮位置合理
- [ ] 响应式设计在不同屏幕尺寸下正常

## 问题记录

### 发现的问题

| 问题编号 | 问题描述 | 严重程度 | 状态 | 备注 |
|---------|---------|---------|------|------|
| 1       |         |         |      |      |
| 2       |         |         |      |      |
| 3       |         |         |      |      |

### 待优化项

- [ ] 添加上传进度条
- [ ] 优化大文件处理速度
- [ ] 添加批量上传功能
- [ ] 改进错误提示信息
- [ ] 添加PSD预览功能

## 测试结论

- 测试日期：
- 测试人员：
- 测试环境：
- 整体评价：
- 是否可以发布：□ 是  □ 否

## 备注


